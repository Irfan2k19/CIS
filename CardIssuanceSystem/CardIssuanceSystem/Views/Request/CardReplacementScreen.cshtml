@model CardIssuanceSystem.Core.ViewModel.UpdateRequestVM
@{
    ViewBag.Title = "Card Replacement Request";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var requestId = ViewBag.RequestId;
}

<div class="container">
    <div class="form-group row">
        <div class="col-sm-3" style="display:none;">
            <label class="control-label">Card Number</label>
            <input type="text" class="form-control CardNo">
        </div><!-- End col-sm-3 -->
        <div class="col-sm-3">
            <label class="control-label">Account Number</label>
            <input type="text" class="form-control AccountNumber">
        </div><!-- End col-sm-3 -->
        <div class="col-sm-3">
            <label class="control-label">CIF</label>
            <input type="text" class="form-control CIF">
        </div><!-- End col-sm-3 -->

        <div class="col-sm-6">
            <button class="btn btn-cstm btn-search">Search</button>
        </div><!-- End col-sm-9 -->
    </div><!-- End row -->

    <div id="ResultForm" style="display:none">
        <div class="row form-group">
            <div class="col-sm-3" style="display:@(requestId == 0 ? "none" : "block")">
                <label class="control-label">Request Date</label>
                <div class='input-group date datetimepicker1'>
                    <input type='text' class="form-control" id="RequestDate" readonly @(requestId == null ? "" : "disabled")/>
                    <span class="input-group-addon">
                        <span class="glyphicon glyphicon-calendar"></span>
                    </span>
                </div>
            </div><!-- End col-sm-3 -->
            <div class="col-sm-3">
                <label class="control-label">Card Type</label>
                <select class="form-control" id="CardType">
                    <option value="">--Please Select--</option>
                    @foreach (var item in (ViewBag.CardTypes))
                    {
                        <option value="@item.ID">@item.Title</option>
                    }
                </select>
            </div><!-- End col-sm-3 -->

            <div class="col-sm-3">
                <label class="control-label">Salutation</label>
                <select class="form-control" id="Salutation">
                    @*<option>Salutation</option>*@
                    <option>Mr.</option>
                    <option>Ms.</option>
                    <option>Mrs.</option>
                </select>
            </div><!-- End col-sm-3 -->
            <div class="col-sm-3">
                <label class="control-label">Card Title</label>
                <input type="text" class="form-control" id="CardTitle"  maxlength="19">
            </div><!-- End col-sm-3 -->
        </div><!-- End row -->
        <div class="row form-group">
            <div class="col-sm-3">
                <label class="control-label">Card No</label>
                <input type="text" class="form-control" id="CardNumber" disabled>
            </div><!-- End col-sm-3 -->
            @*<div class="col-sm-3">
                <label class="control-label">LandLine</label>
                <select class="form-control" id="MainLandline">
                    <option value="0">Please Select</option>
                    <option value="1">Residence</option>
                    <option value="2">Office</option>*@
                    @*<option value="3">Other Landline</option>*@
                @*</select>
            </div>*@<!-- End col-sm-3 -->
            <div class="col-sm-3">
                <label class="control-label">Mobile</label>
                <select class="form-control" id="MainMobile">
                    <option value="0">--Please Select--</option>
                    <option value="1">Mobile</option>
                    <option value="2">Mobile 1</option>
                    <option value="3">Mobile 2</option>
                    <option value="4">Mobile 3</option>
                    <option value="5">Other</option>
                </select>
            </div><!-- End col-sm-3 -->
            <div class="col-sm-3">
                <label class="control-label">Set Mobile Number</label>
                @*<input type="text" class="form-control" id="SetAddress">*@
                <input type="text" class="form-control" id="SetMobileNo" maxlength="49"/>
            </div><!-- End col-sm-3 -->
        </div>

        <div class="row form-group">
            <div class="col-sm-3">
                <label class="control-label">Select Landline No</label>
                <select class="form-control" id="MainLandlineNo">
                    <option value="1">Landline No</option>
                    <option value="2">Other</option>
                </select>
            </div><!-- End col-sm-3 -->
            <div class="col-sm-3">
                <label class="control-label">Set Landline Number</label>
                @*<input type="text" class="form-control" id="SetAddress">*@
                <input type="text" class="form-control" id="SetLandlineNo" maxlength="49"/>
            </div><!-- End col-sm-3 -->

            <div class="col-sm-3">
                <label class="control-label">Select Office No</label>
                <select class="form-control" id="MainOfficeNo">
                    <option value="1">Office No</option>
                    <option value="2">Other</option>
                </select>
            </div><!-- End col-sm-3 -->
            <div class="col-sm-3">
                <label class="control-label">Set Office Number</label>
                @*<input type="text" class="form-control" id="SetAddress">*@
                <input type="text" class="form-control" id="SetOfficeNo" maxlength="49"/>
            </div><!-- End col-sm-3 -->
        </div>
        <div class="row form-group">

            <div class="col-sm-3">
                <label class="control-label">Address</label>
                <select class="form-control" id="MainAddress">
                    <option value="0">--Please Select--</option>
                    <option value="1">Account Address</option>
                    <option value="2">Customer Address 1</option>
                    <option value="3">Customer Address 2</option>
                    <option value="4">Other</option>
                </select>
            </div><!-- End col-sm-3 -->
            <div class="col-sm-9">
                <label class="control-label">Set Address</label>
                @*<input type="text" class="form-control" id="SetAddress">*@
                <textarea class="form-control address-limit" id="SetAddress" rows="3" cols="8" maxlength="498"></textarea>
            </div><!-- End col-sm-3 -->
        </div>

        <div id="UnEditable">
            <h4 class="main_hdng">Customer Information</h4>

            <div class="row form-group">
                <div class="col-sm-3">
                    <label class="control-label">Customer ID</label>
                    <input type="text" class="form-control" id="CustomerId">
                </div><!-- End col-sm-3 -->

                <div class="col-sm-3">
                    <label class="control-label">Customer Name</label>
                    <input type="text" class="form-control" id="CustomerName">
                </div><!-- End col-sm-3 -->
                <div class="col-sm-3">
                    <label class="control-label">Account No</label>
                    <input type="text" class="form-control AccountNo">
                </div><!-- End col-sm-3 -->
                <div class="col-sm-3">
                    <label class="control-label">Account Title</label>
                    <input type="text" class="form-control" id="AccountTitle">
                </div><!-- End col-sm-3 -->

                @*<div class="col-sm-3">
                    <label class="control-label">Address Type</label>
                    <select class="form-control" id="AddressType">
                        <option>Address Type</option>
                    </select>
                </div>

                <div class="col-sm-3">
                    <label class="control-label">Correspondence</label>
                    <input type="text" class="form-control" id="Correspondence">
                </div>*@



            </div><!-- End row -->
            <div class="row form-group">
                <div class="col-sm-12">
                    <label class="control-label">Account Address</label>
                    <input type="text" class="form-control" id="AccountAddress">
                </div><!-- End col-sm-3 -->
            </div>
            <div class="row form-group">
                <div class="col-sm-12">
                    <label class="control-label">Customer Address 1</label>
                    <input type="text" class="form-control" id="CustomerAddress">
                </div><!-- End col-sm-3 -->
            </div>
            <div class="row form-group">
                <div class="col-sm-12">
                    <label class="control-label">Customer Address 2</label>
                    <input type="text" class="form-control" id="Address">
                </div><!-- End col-sm-3 -->
            </div>
                <div class="row form-group">
                    <div class="col-sm-3">
                        <label class="control-label">Mobile No</label>
                        <input type="text" class="form-control" id="MobileNo">
                    </div><!-- End col-sm-3 -->
                    <div class="col-sm-3">
                        <label class="control-label">Mobile No 1</label>
                        <input type="text" class="form-control" id="MobileNo1">
                    </div><!-- End col-sm-3 -->
                    <div class="col-sm-3">
                        <label class="control-label">Mobile No 2</label>
                        <input type="text" class="form-control" id="MobileNo2">
                    </div><!-- End col-sm-3 -->
                    <div class="col-sm-3">
                        <label class="control-label">Mobile No 3</label>
                        <input type="text" class="form-control" id="MobileNo3">
                    </div><!-- End col-sm-3 -->
                </div><!-- End row -->

                <div class="row form-group">
                    <div class="col-sm-3">
                        <label class="control-label">Phone Res</label>
                        <input type="text" class="form-control" id="PhoneRes">
                    </div><!-- End col-sm-3 -->
                    <div class="col-sm-3">
                        <label class="control-label">Phone Off</label>
                        <input type="text" class="form-control" id="PhoneOff">
                    </div><!-- End col-sm-3 -->

                    <div class="col-sm-3">
                        <label class="control-label">Fax No</label>
                        <input type="text" class="form-control" id="FaxNo">
                    </div><!-- End col-sm-3 -->

                    <div class="col-sm-3">
                        <label class="control-label">Email</label>
                        <input type="email" class="form-control" id="Email">
                    </div><!-- End col-sm-3 -->


                </div><!-- End row -->

                <div class="row form-group">
                    <div class="col-sm-3">
                        <label class="control-label">Date of Birth</label>
                        <div class='input-group date'>
                            <input type='text' class="form-control" id="DateofBirth" />
                            <span class="input-group-addon">
                                <span class="glyphicon glyphicon-calendar"></span>
                            </span>
                        </div><!-- End datepicker -->

                    </div><!-- End col-sm-3 -->
                    <div class="col-sm-3">
                        <label class="control-label">Father's Name</label>
                        <input type="text" class="form-control" id="FatherName">
                    </div><!-- End col-sm-3 -->

                    <div class="col-sm-3">
                        <label class="control-label">Mother's Maiden Name</label>
                        <input type="text" class="form-control" id="MotherName">
                    </div><!-- End col-sm-3 -->


                    <div class="col-sm-3">
                        <label class="control-label">Identification</label>
                        <select class="form-control" id="Identification">
                            <option>Identification</option>
                        </select>
                    </div><!-- End col-sm-3 -->



                </div><!-- End row -->

                <div class="row form-group">
                    <div class="col-sm-3">
                        <label class="control-label">Identification No</label>
                        <input type="text" class="form-control" id="CNIC">
                    </div><!-- End col-sm-3 -->
                    <div class="col-sm-3">
                        <label class="control-label">Old NIC</label>
                        <input type="text" class="form-control" id="OldCNIC">
                    </div><!-- End col-sm-3 -->

                    <div class="col-sm-3">
                        <label class="control-label">Product</label>
                        <input id="Product" type="text" class="form-control">
                    </div><!-- End col-sm-3 -->

                    <div class="col-sm-3">
                        <label class="control-label">Operating Instruction</label>
                        <input id="OperatingInst" type="text" class="form-control">
                    </div><!-- End col-sm-3 -->


                </div><!-- End row -->
                <div class="row form-group">
                    <div class="col-sm-3">
                        <label class="control-label">Sector</label>
                        <input id="Sector" type="text" class="form-control">
                    </div><!-- End col-sm-3 -->
                    <div class="col-sm-3">
                        <label class="control-label">Nationality</label>
                        <input id="Nationality" type="text" class="form-control">
                    </div><!-- End col-sm-3 -->
                    <div class="col-sm-3">
                        <label class="control-label">Residence</label>
                        <input id="Residence" type="text" class="form-control">
                    </div><!-- End col-sm-3 -->
                    <div class="col-sm-3">
                        <div class="checkbox">
                            <label>
                                <input type="checkbox" id="Waive" unchecked=""><span class="checkbox-material"><span class="check"></span></span>
                                Waive Charges
                            </label>
                        </div>
                    </div><!-- End col-sm-3 -->
                </div>
                <div style="display:none;">
                    <h4 class="main_hdng">Account Information</h4>

                    <div class="row form-group">
                        <div class="col-sm-3">
                            <label class="control-label">Product</label>
                            <select class="form-control" id="Product">
                                <option>Product</option>
                            </select>
                        </div><!-- End col-sm-3 -->

                        <div class="col-sm-3">
                            <label class="control-label">Scheme</label>
                            <select class="form-control" id="Scheme">
                                <option>Scheme</option>
                            </select>
                        </div><!-- End col-sm-3 -->



                        <div class="col-sm-3">
                            <label class="control-label">Account Nature</label>
                            <input type="text" class="form-control" id="AccountNature">
                        </div><!-- End col-sm-3 -->
                    </div><!-- End row -->

                    <div class="row form-group">
                        <div class="col-sm-3">
                            <label class="control-label">Account Title</label>
                            <input type="text" class="form-control" id="AccountTitle">
                        </div><!-- End col-sm-3 -->

                        <div class="col-sm-3">
                            <label class="control-label">Ready for Authorization</label>
                            <select class="form-control" id="Authorization">
                                <option>Yes</option>
                                <option>No</option>
                            </select>
                        </div><!-- End col-sm-3 -->

                        <input type="hidden" id="AvailBalance" />
                        <input type="hidden" id="AccountStatus" />

                        <div class="col-sm-3">

                        </div><!-- End col-sm-3 -->
                    </div><!-- End row -->
                </div>
            </div>

        <div class="btns_right">
            <button class="btn btn-cstm" type="submit" id="ReplaceSubmit">Proceed</button>
            <button class="btn btn-cstm btn-light" onclick="location.reload();">Cancel</button>
        </div><!-- End btns_right -->
    </div>


</div><!-- End container -->
<script type="text/javascript">
    $(document).ready(function () {
        $('#ResultForm').css("display", "none");
        $("#UnEditable :input").attr("disabled", true);
        $("#Waive").attr("disabled", false);
    });


    $('.btn-search').click(function () {
        //debugger
        //$('#ResultForm').css("display", "block");

        @*var Url = '@Url.Action("SearchAccountByCardNo", "Request")';*@
        var Url = '@Url.Action("SearchAccountByAccountNoAndCIF", "Request")';
        var AccountNumber = $('.AccountNumber').val();
        var CIF = $('.CIF').val();
        if (AccountNumber == null || AccountNumber.trim() == "" || typeof (AccountNumber) == "undefined") {
            $('.AccountNumber').css("border", "red solid 1px");
            alert("Please Enter Account Number");
            return false;
        }
        if (CIF == null || CIF.trim() == "" || typeof (CIF) == "undefined") {
            $('.CIF').css("border", "red solid 1px");
            alert("Please Enter CIF Number");
            return false;
        }
        if (!NumberValue(AccountNumber) || !NumberValue(CIF)) {
            alert("Only Numeric Value is Allowed");
            return false;
        }
        if (!CheckLength(AccountNumber, 15)) {
            $('.AccountNumber').css("border", "red solid 1px");
            alert("Account number length should be equal to 15");
            return false;
        }
        if (!CheckLength(CIF, 10)) {
            $('.CIF').css("border", "red solid 1px");
            alert("CIF number length should be equal to 10");
            return false;
        }

        ShowLoader();
        ajaxCall(Url, { AccountNo: AccountNumber, CIF: CIF }, function (resp) {
            HideLoader();
            if (resp.Message == '@CardIssuanceSystem.Core.Helpers.CustomMessages.CardNotActive') {
                //debugger;
                $('.CardNo').val(resp.CardInfo[0].CardNo);
                $('#CardNumber').val(resp.CardInfo[0].CardNo);
                $('#CardTitle').val(resp.CardInfo[0].CardTitle);
                $('#CustomerId').val(resp.AccountInfo.CustomerID);
                $('#CustomerName').val(resp.AccountInfo.CustomerName);
                $('#AccountAddress').val(resp.AccountInfo.AccountAddress);
                $('#CustomerAddress').val(resp.AccountInfo.CustomerAddress1);
                $('#Address').val(resp.AccountInfo.CustomerAddress2);
                $('#MobileNo').val(resp.AccountInfo.AccountMobile);
                $('#MobileNo1').val(resp.AccountInfo.SMS);
                $('#MobileNo2').val(resp.AccountInfo.SMS2);
                $('#MobileNo3').val(resp.AccountInfo.SMS3);
                $('#PhoneRes').val(resp.AccountInfo.PhoneResidence);
                $('#PhoneOff').val(resp.AccountInfo.OffPhone);
                //$('#FaxNo').val();
                $('#Email').val(resp.AccountInfo.Email);
                $('#FatherName').val(resp.AccountInfo.FathersName);
                $('#MotherName').val(resp.AccountInfo.MothersName);
                $('#DateofBirth').val(resp.AccountInfo.CustomerDOB);
                $('#Identification option:selected').text(resp.AccountInfo.IdentificationType);
                $('#CNIC').val(resp.AccountInfo.IdentificationNo);
                //$('#OldCNIC').val();
                $('#Product option:selected').text(resp.AccountInfo.Product)
                $('#Scheme option:selected').text(resp.AccountInfo.Sector)
                $('.AccountNo').val(resp.AccountInfo.T24ACNO);
                $('#AccountNature').val(resp.AccountInfo.AccountNature);
                $('#AccountTitle').val(resp.AccountInfo.AccountTitle);
                $('#AvailBalance').val(resp.AccountInfo.AvailableBalance);
                //$('#AccountStatus').val(resp.AccountInfo.AccountStatus);
                $('#RequestDate').val('@(Model?.RequestData?.RequestDate ?? DateTime.Now)');
                var respSalutation = '@((Model?.RequestData?.Salutation ?? null) == null ? string.Empty : Model?.RequestData?.Salutation.Trim())';
               // $('#Salutation option:selected').text();
                //$('#CardType').val('@(Model?.RequestData?.CardTypeID)');
                //$('#CardType').val(resp.CardInfo[0].CardTypeID);
                
                $('#Sector').val(resp.AccountInfo.Sector);
                $('#Product').val(resp.AccountInfo.Product);
                $('#OperatingInst').val(resp.AccountInfo.OpInstructions);
                $('#Nationality').val(resp.AccountInfo.Nationality);
                $('#Residence').val(resp.AccountInfo.ResidenceStatus);
                if ('@(Model?.RequestData?.WaiveCharges ?? false)' === 'True') {
                    $('#Waive').prop('checked', true);
                }

                $('#ResultForm').css("display", "block");
            }
            else if (resp.Message == '@CardIssuanceSystem.Core.Helpers.CustomMessages.Success') {
                //alert("Card is already active");
                alert('@CardIssuanceSystem.Core.Helpers.CustomMessages.AccountNotEligible');
            }
            else {
                alert(resp.Message);
                $('#ResultForm').css("display", "none");


                return false;
            }
        }, function (fail) {
            HideLoader();
            alert("Failure");
        }, function (err) {
            HideLoader();
            if (err.responseText.indexOf("IsSuccess") >= 0) {
                alert(err.responseJSON.ErrorMessage);
            }
            else {
                alert(genericMessage);
            }
        });
    });


    $('#ReplaceSubmit').click(function () {
        //debugger
        var Url = '@Url.Action("SubmitNewRequest", "Request")';
        if (parseInt('@requestId') > 0) {
            Url = '@Url.Action("UpdateReviewRequest", "Request")';
        }
        //var dto = {
        var ID = parseInt('@requestId');
        var RequestType = "R";
        var CardNo = $('.CardNo').val();
        var RequestDate = $('#RequestDate').val();
        var CardType = $('#CardType option:selected').val();
        var CardTypeId = $('#CardType option:selected').val();
        var Salutation = $('#Salutation option:selected').text();
        var CardTitle = $('#CardTitle').val();
        var CustomerId = $('#CustomerId').val();
        var CustomerName = $('#CustomerName').val();

        var AccountAddress = $('#AccountAddress').val();
        var CustomerAddress = $('#CustomerAddress').val();
        var Address = $('#Address').val();
        var MobileNo = $('#MobileNo').val();
        var MobileNo1 = $('#MobileNo1').val();
        var MobileNo2 = $('#MobileNo2').val();
        var MobileNo3 = $('#MobileNo3').val();
        var PhoneRes = $('#PhoneRes').val();
        var PhoneOff = $('#PhoneOff').val();
        var FaxNo = $('#FaxNo').val();
        var Email = $('#Email').val();
        var FatherName = $('#FatherName').val();
        var MotherName = $('#MotherName').val();
        var DateofBirth = $('#DateofBirth').val();
        var Identification = $('#Identification').val();
        var CNIC = $('#CNIC').val();
        var OldCNIC = $('#OldCNIC').val();
        var Product = $('#Product').val();
        var Scheme = $('#Scheme').val();
        var AccountNo = $('.AccountNo').val();
        var AccountNature = $('#AccountNature').val();
        var AccountTitle = $('#AccountTitle').val();
        var Authorization = $('#Authorization').val();
        var Waive = $('#Waive').is(':checked');
        var CIFNo = CustomerId;
        var CardNumber = $('.CardNo').val();
        var MainMobile = $('#MainMobile option:selected').text();
        var MainAddress = $('#MainAddress option:selected').text();
        var MainLandline = "";//$('#MainLandline option:selected').text();
        var CustomerRequestId = '@(ViewBag.RequestCustomerInfo?.ID ?? 0)';
        var SetAddress = $('#SetAddress').val();
        var SetMobileNo = $('#SetMobileNo').val();
        var MainLandlineNo = $('#MainLandlineNo option:selected').text();
        var SetLandlineNo = $('#SetLandlineNo').val();
        var MainOfficeNo = $('#MainOfficeNo option:selected').text();
        var SetOfficeNo = $('#SetOfficeNo').val();

        //SetAddress = SetAddress.replace(/[^a-z0-9A-Z  ]/gi, ' ');
        //SetAddress = SetAddress.replace(/^[A-Za-z0-9 \/,.()#_&\\-]*$/gi, ' ');
        SetAddress = SetAddress.replace(/[^a-z0-9A-Z  \/,.()#_&\\-]/gi, ' ');
        SetMobileNo = SetMobileNo.replace(/[^0-9]/gi, '');
        SetLandlineNo = SetLandlineNo.replace(/[^0-9]/gi, '');
        SetOfficeNo = SetOfficeNo.replace(/[^0-9]/gi, '');

        if (MainAddress.trim() == '--Please Select--') {
            $('#MainAddress').css("border", "red solid 1px");
            alert("Please Select Main Main Address");
            return false;
        }
        else if (MainAddress.trim() == 'Other') {
            if (SetAddress.trim() == "" || SetAddress.trim() == null || SetAddress == 'undfefined') {
                alert("Please Set Address");
                return false;
            } else {
                MainAddress = SetAddress;
            }
        }
        if (MainMobile === "--Please Select--") {
            $('#MainMobile').css("border", "red solid 1px");
            alert("Please Enter Mobile Number");
            return false;
        }
        else if (MainMobile.trim() == 'Other') {
            if (SetMobileNo.trim() == "" || SetMobileNo.trim() == null || SetMobileNo == 'undfefined') {
                alert("Please Set Mobile Number");
                return false;
            } else {
                MainMobile = SetMobileNo;
            }
        }
        if (MainLandlineNo === "--Please Select--") {
            $('#MainLandlineNo').css("border", "red solid 1px");
            alert("Please Enter Landline Number");
            return false;
        }
        else if (MainLandlineNo.trim() == 'Other') {
            if (SetLandlineNo.trim() == "" || SetLandlineNo.trim() == null || SetLandlineNo == 'undfefined') {
                alert("Please Set Landline Number");
                return false;
            } else {
                MainLandlineNo = SetLandlineNo;
            }
        }
        if (MainOfficeNo === "--Please Select--") {
            $('#MainOfficeNo').css("border", "red solid 1px");
            alert("Please Enter Office Number");
            return false;
        }
        else if (MainOfficeNo.trim() == 'Other') {
            if (SetOfficeNo.trim() == "" || SetOfficeNo.trim() == null || SetOfficeNo == 'undfefined') {
                alert("Please Set Office Number");
                return false;
            } else {
                MainOfficeNo = SetOfficeNo;
            }
        }
        //if (MainLandline.trim() == 'Please Select') {
        //    alert("Please Select Main Main LandLine");
        //    return false;
        //}

        //if (RequestDate == "") {
        //    $('#RequestDate').css("border", "red solid 1px");
        //    alert("Please Request Date");
        //    return false;
        //}
        if (!CardType || CardType.trim() == "") {
            $('#CardType').css("border", "red solid 1px");
            alert("Please Enter Card Type");
            return false;
        }
        //if (Salutation == "" || Salutation == "Salutation") {
        //    $('#Salutation').css("border", "red solid 1px");
        //    alert("Please Enter Salutation");
        //    return false;
        //}
        if (CardTitle.trim() == "") {
            $('#CardTitle').css("border", "red solid 1px");
            alert("Please Enter Card Title");
            return false;
        }


        if (CardTitle.length > 19)
        {
            debugger
            $('#CardTitle').css("border", "red solid 1px");
            alert("Please Check Card Title Length");
            return false;
        }

        if (CardTitleValue(CardTitle) == false) {
            alert("Please Enter Valid Card Title");
            return false;
        }

        if (!CheckLength(AccountNo, 15)) {
            $('.AccountNumber').css("border", "red solid 1px");
            alert("Account number length should be equal to 15");
            return false;
        }
        if (!CheckLength(CIFNo, 10)) {
            $('.CIF').css("border", "red solid 1px");
            alert("CIF number length should be equal to 10");
            return false;
        }

        ShowLoader();
        ajaxCall(Url, {
            ID: ID,
            RequestType: RequestType,
            CardNo: CardNo,
            RequestDate: RequestDate,
            CardType: CardType,
            CardTypeId: CardTypeId,
            Salutation: Salutation,
            CardTitle: CardTitle,
            CustomerId: CustomerId,
            CustomerName: CustomerName,
            AccountAddress: AccountAddress,
            CustomerAddress: CustomerAddress,
            Address: Address,
            MobileNo: MobileNo,
            MobileNo1: MobileNo1,
            MobileNo2: MobileNo2,
            MobileNo3: MobileNo3,
            PhoneRes: PhoneRes,
            PhoneOff: MainOfficeNo,
            FaxNo: FaxNo,
            Email: Email,
            FatherName: FatherName,
            MotherName: MotherName,
            DateofBirth: DateofBirth,
            Identification: Identification,
            CNIC: CNIC,
            OldCNIC: OldCNIC,
            Product: Product,
            Scheme: Scheme,
            AccountNo: AccountNo,
            AccountNature: AccountNature,
            AccountTitle: AccountTitle,
            Authorization: Authorization,
            Waive: Waive,
            CustomerRequestId: CustomerRequestId,
            CIFNo: CIFNo,
            CardNumber: CardNumber,
            MainMobile: MainMobile,
            MainAddress: MainAddress,
            MainLandline: MainLandline,
            LandlineNo: MainLandlineNo,
            CardNumber: CardNo
        }, function (resp) {
            HideLoader();
            if (typeof (resp) === "object" && resp.ErrorMessage == "@CardIssuanceSystem.Core.Helpers.CustomMessages.Success") {
                debugger;
                alert(resp.ErrorMessage + " !" + " Request Id: " + resp.IsSuccess);
                location.reload();
            }
            else if (typeof (resp) === "boolean") {
                alert(resp);
                if (resp === true) {
                    location.reload();
                }
            }
            else if (typeof (resp) === "object") {
                if (typeof (resp.IsSuccess) === "boolean") {
                    alert(resp.ErrorMessage);
                    location.reload();
                }
                else {
                    alert(resp.ErrorMessage + " !" + " Request Id: " + resp.IsSuccess);
                    location.reload();
                }
            }
            else {
                //alert(resp.ErrorMessage);
                alert(resp.ErrorMessage + " !" + " Request Id: " + resp.IsSuccess);
                location.reload();
            }
        }, function (fail) {
            HideLoader();
            alert("Failure");
        }, function (err) {
            HideLoader();
            alert("Error");
        });
    });

    $(window).on('load', function () {
        if (parseInt('@requestId') > 0) {
            //$('.CardNo').val('@(Model?.RequestData?.CardNo ?? string.Empty)');
            $('.AccountNumber').val('@(Model?.RequestData?.AccountNo ?? string.Empty)');
            $('.CIF').val('@(Model?.RequestData?.CIFNo ?? string.Empty)');
            $('.btn-search').trigger('click');
            setTimeout(function () { $('.btn-search').attr("disabled", true) }, 100);
            //$('.CardNo').attr("disabled", true);
            $('.AccountNumber').attr("disabled", true);
            $('.CIF').attr("disabled", true);
            debugger
            //$('#MainMobile option:selected').text('@ViewBag.MainMobile');
            //$('#MainAddress option:selected').text('@ViewBag.MainAddress');
            //$('#MainLandline option:selected').text('@ViewBag.MainLandline');
            $('#SetAddress').val('@ViewBag.SetAddress');

            $('#SetMobileNo').val('@ViewBag.SetMobileNo');
            $('#SetLandlineNo').val('@ViewBag.SetLandlineNo');
            $('#SetOfficeNo').val('@ViewBag.SetOfficeNo');

            $('#MainMobile option').map(function () {
                if ($(this).text() == '@ViewBag.MainMobile') return this;
            }).attr('selected', 'selected');

            $('#MainAddress option').map(function () {
                if ($(this).text() == '@ViewBag.MainAddress') return this;
            }).attr('selected', 'selected');

            $('#MainLandlineNo option').map(function () {
                if ($(this).text() == '@ViewBag.MainLandlineNo') return this;
            }).attr('selected', 'selected');

            $('#MainOfficeNo option').map(function () {
                if ($(this).text() == '@ViewBag.MainOfficeNo') return this;
            }).attr('selected', 'selected');
            @*$('#MainLandline option').map(function () {
                if ($(this).text() == '@ViewBag.MainLandline') return this;
            }).attr('selected', 'selected');*@
        }
    });

</script>

